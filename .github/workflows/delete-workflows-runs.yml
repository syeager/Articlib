name: Delete workflow runs
on:
  workflow_dispatch:
    inputs:
      repository:
        description: "The repository for which to delete workflow runs."
        required: true
      workflow:
        description: "The path to the workflow's .yml file."
        required: true
      older-than-seconds:
        description: "Consider only the workflows older than the given number of seconds."
        required: false
      created-befor:
        description: "Consider only the workflows created before this date for deletion."
        required: false
      actor:
        description: "Returns someone's workflow runs. Use the login for the user who created the push associated with the check suite or workflow run."
        required: false
      branch:
        description: "Returns workflow runs associated with a branch. Use the name of the branch of the push."
        required: false
      event:
        description: "Returns workflow run triggered by the event you specify. For example, push, pull_request or issue."
        required: false
      status:
        description: "Returns workflow runs with the given status. Can be one of queued, in_progress, or completed."
        required: false
      what-if:
        description: "Set to true to preview the changes made by this action without deleting any workflow runs."
        required: false

jobs:
  del_runs:
    runs-on: ubuntu-latest
    steps:
    - name: Delete old workflow runs
      uses: MajorScruffy/delete-old-workflow-runs@v0.1.0
      with:
        repository:  ${{ github.event.inputs.repository }}
        workflow: ${{ github.event.inputs.minimum_runs }}
        older-than-seconds:  ${{ github.event.inputs.older-than-seconds }}
        created-before:  ${{ github.event.inputs.created-before }}
        actor:  ${{ github.event.inputs.actor }}
        branch:  ${{ github.event.inputs.branch }}
        event:  ${{ github.event.inputs.event }}
        status:  ${{ github.event.inputs.status }}
        what-if:  ${{ github.event.inputs.what-if }}
